# Project "Persais" - Master Overview

## ĞšĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ñ
Self-Evolving Agentic Platform - Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ° Ğ½Ğ° Ğ±Ğ°Ğ·Ğµ NestJS, Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‰Ğ°Ñ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼ Docker-ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğµ, Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ÑÑÑ‰Ğ°Ñ:
- Ğ§Ğ°Ñ‚-Ğ±Ğ¾Ñ‚ (Telegram)
- ĞÑ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² (LangGraph)
- Ğ¡Ñ€ĞµĞ´Ğ° ÑĞ°Ğ¼Ğ¾Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ñ (Aider + GitOps)

## ĞšĞ»ÑÑ‡ĞµĞ²Ğ°Ñ Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ
ĞĞ³ĞµĞ½Ñ‚ **"ĞœĞµÑ…Ğ°Ğ½Ğ¸Ğº"** Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Aider (CLI) Ğ´Ğ»Ñ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ ĞºĞ¾Ğ´Ğ°, ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ĞµĞ¹ Ğ‘Ğ” Ğ¸ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ñ‡ĞµÑ€ĞµĞ· GitOps Ğ¿Ğ°Ğ¹Ğ¿Ğ»Ğ°Ğ¹Ğ½.

---

## Ğ¡ĞµĞºÑ†Ğ¸Ğ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

| # | Ğ¡ĞµĞºÑ†Ğ¸Ñ | Ğ¤Ğ°Ğ¹Ğ» | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|---|--------|------|--------|
| 1 | Ğ˜Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° | [01-infrastructure.md](./01-infrastructure.md) | ğŸ“‹ Draft |
| 2 | Core Modules (NestJS) | [02-core-modules.md](./02-core-modules.md) | ğŸ“‹ Draft |
| 2a | Agent Architecture | [02a-agent-architecture.md](./02a-agent-architecture.md) | âœ… Done |
| 2b | Message Aggregator | [02b-message-aggregator.md](./02b-message-aggregator.md) | âœ… Done |
| 3 | Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… | [03-database.md](./03-database.md) | ğŸ“‹ Draft |
| 4 | Telegram Interface | [04-telegram.md](./04-telegram.md) | ğŸ“‹ Draft |
| 4a | Voice Messages | [04a-voice-messages.md](./04a-voice-messages.md) | âœ… Done |
| 5 | ĞĞ³ĞµĞ½Ñ‚ "ĞœĞµÑ…Ğ°Ğ½Ğ¸Ğº" | [05-mechanic-agent.md](./05-mechanic-agent.md) | ğŸ“‹ Draft |
| 6 | Dynamic Layer | [06-dynamic-layer.md](./06-dynamic-layer.md) | ğŸ“‹ Draft |
| 7 | Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ | [07-security.md](./07-security.md) | ğŸ“‹ Draft |
| 8 | Roadmap | [08-roadmap.md](./08-roadmap.md) | ğŸ“‹ Draft |
| 9 | Distribution | [09-distribution-backlog.md](./09-distribution-backlog.md) | ğŸ“‹ Backlog |

---

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ğ°Ñ Ğ´Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° (High-Level)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DOCKER CONTAINER                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    NestJS Application                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Telegram â”‚  â”‚  GitOps  â”‚  â”‚  Coder   â”‚  â”‚ Database â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Module  â”‚  â”‚  Module  â”‚  â”‚  Module  â”‚  â”‚  Module  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚       â”‚             â”‚             â”‚             â”‚         â”‚  â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚                          â”‚                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚
â”‚  â”‚  â”‚              AgentOrchestrator                 â”‚        â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚        â”‚  â”‚
â”‚  â”‚  â”‚  â”‚Classifierâ”‚  â”‚ Message  â”‚  â”‚  Router  â”‚    â”‚        â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ (Haiku)  â”‚  â”‚Aggregatorâ”‚  â”‚  (State) â”‚    â”‚        â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚        â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚
â”‚  â”‚                          â”‚                                 â”‚  â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚    â”‚                     â”‚                     â”‚          â”‚  â”‚
â”‚  â”‚    â–¼                     â–¼                     â–¼          â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚ â”‚ Master   â”‚      â”‚ Mechanic â”‚          â”‚ Dynamic  â”‚     â”‚  â”‚
â”‚  â”‚ â”‚(Orchestr)â”‚      â”‚  Agent   â”‚          â”‚ Agents   â”‚     â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚                        â”‚                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Python Sidecar (Aider)                        â”‚  â”‚
â”‚  â”‚                        â–¼                                   â”‚  â”‚
â”‚  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚  â”‚
â”‚  â”‚              â”‚   aider-chat    â”‚                          â”‚  â”‚
â”‚  â”‚              â”‚  (via OpenRouter)â”‚                          â”‚  â”‚
â”‚  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                    â”‚                    â”‚
          â–¼                    â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Telegram â”‚        â”‚ Postgres â”‚         â”‚ Deepgram â”‚
    â”‚   API    â”‚        â”‚ (Neon)   â”‚         â”‚   STT    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technology Stack Summary

| ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ | Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ |
|-----------|------------|
| Runtime | Node.js (NestJS) |
| Language | TypeScript (Strict Mode) |
| Database | PostgreSQL + pgvector (Neon) |
| ORM | Drizzle ORM |
| Queues | **In-Memory + Postgres state** (Ğ±ĞµĞ· Redis!) |
| AI Orchestration | LangGraph JS |
| AI Coder | Aider (CLI via OpenRouter) |
| AI Models | Claude 3 Haiku (classifier), Claude 3.5 Sonnet (agents) |
| Speech-to-Text | Deepgram (nova-2) |
| Telegram | Grammy |
| Validation | Zod |
| Deployment | Fly.io |
| VCS | Git (Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°) |

---

## Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸ĞµĞ²

```
~/WORK/code/
â”œâ”€â”€ persais-core/          # Ğ¯Ğ´Ñ€Ğ¾ (Ğ±ÑƒĞ´ÑƒÑ‰Ğ¸Ğ¹ NPM Ğ¿Ğ°ĞºĞµÑ‚)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ core/          # Core modules
â”‚   â”‚   â”œâ”€â”€ agents/        # Master, Mechanic
â”‚   â”‚   â””â”€â”€ shared/
â”‚   â””â”€â”€ package.json       # name: "persais-core"
â”‚
â””â”€â”€ persais/               # Ğ¦ĞµĞ»ĞµĞ²Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ (user code)
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ main.ts        # Entry point
    â”‚   â”œâ”€â”€ agents/        # Dynamic agents
    â”‚   â”œâ”€â”€ tools/         # Dynamic tools
    â”‚   â””â”€â”€ schemas/       # Dynamic schemas
    â””â”€â”€ package.json       # depends on persais-core
```

---

## Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞµĞºÑ†Ğ¸ÑĞ¼Ğ¸

```
Infrastructure (1)
      â”‚
      â”œâ”€â”€â–º Core Modules (2) â—„â”€â”€â”€ Database (3)
      â”‚           â”‚
      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
      â”‚    â”‚             â”‚
      â”‚    â–¼             â–¼
      â”‚ Agent Arch   Message Agg
      â”‚   (2a)          (2b)
      â”‚    â”‚             â”‚
      â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚           â”‚
      â”‚           â–¼
      â”‚    Telegram (4) â—„â”€â”€â”€ Voice (4a)
      â”‚           â”‚
      â”‚           â–¼
      â”‚    Mechanic (5) â”€â”€â”€â–º Dynamic Layer (6)
      â”‚           â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â–º Security (7)
```

---

## Ğ ĞµÑˆÑ‘Ğ½Ğ½Ñ‹Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ (Summary)

ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº: [questions-answered.md](./questions-answered.md)

| Ğ’Ğ¾Ğ¿Ñ€Ğ¾Ñ | ĞÑ‚Ğ²ĞµÑ‚ |
|--------|-------|
| PostgreSQL hosting | **Neon** |
| Queues | **In-Memory + Postgres** (Ğ±ĞµĞ· Redis!) |
| AI Model (Aider) | **Claude 3.5 Sonnet** |
| AI Model (Classifier) | **Claude 3 Haiku** |
| Telegram library | **Grammy** |
| Voice messages | **Deepgram** |
| Message batching | **Smart Aggregator** (5s debounce) |
| Users | **Single-user** |
| Repository structure | **persais-core + persais** |
